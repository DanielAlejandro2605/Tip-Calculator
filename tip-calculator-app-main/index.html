<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0"> <!-- displays site properly based on user's device -->

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link rel="stylesheet" href="./styles/styles.css">
  <title>Frontend Mentor | Tip calculator app</title>

  <!-- Feel free to remove these styles or customise in your own stylesheet ðŸ‘ -->
  <style>
    .attribution { font-size: 11px; text-align: center; }
    .attribution a { color: hsl(228, 45%, 44%); }
  </style>
</head>
<body>
    <header>
      <h1>SPLITTER</h1>
    </header>
    <div id="tip_calculor_container">
      <div id="data_container">
            <label for="bill_total">BILL</label>
            <input name="bill_total" type="text" maxlength="512" id="bill_total" class="searchField"/>
    

            <label for="percentage">PERCENTAGE</label>
            <div id="test">
                <button>5%</button>
                <button>10%</button>
                <button>15%</button>
                <button>25%</button>
                <button>50%</button>
            </div>

            <label>Number of people</label>
            <input name="number_of_people"  type="text" id="number_of_people" class="input_field">
        </div>
      <div id="result_container">
        <div id="tip_amount"></div>
        <div id="total_person"></div>
        <button id="action_button">Enter</button>
      </div>
    </div>
    <script>
    let aux;
    let action_button = document.getElementById("action_button");
    let test = document.getElementById('test');
    let button_selected;

    test.onclick = function(event){
        let button = event.target.closest('button');
        if(!button) return;
        if(!test.contains(button)) return;
        let percentage =  addClassSelected(button);
    }
    function addClassSelected(button){
        if(button_selected){
            button_selected.classList.remove('selected');
        }
        button_selected = button;
        button_selected.classList.add('selected');
        aux = button_selected.innerHTML;
    }
    
    action_button.onclick = function(){
        let bill_total = Number(document.getElementById("bill_total").value); 
        let number_of_people = document.getElementById("number_of_people").value;
        bill_total = Number(bill_total);
        number_of_people = Number(number_of_people);
        let percentage = aux.match(/\d+/g);
        // alert("Percentage " + percentage);
        // alert("Bill total " + bill_total);
        // alert("Number of people "  + number_of_people)
        let tip_amount = (bill_total * percentage) / 100 * 2 * 0.1;
        let div_tip_amount = document.getElementById('tip_amount');
        div_tip_amount.innerHTML = myRound(tip_amount, 2);

        let total_per_person = (bill_total / number_of_people + tip_amount).toFixed(2);
        let div_total_per_person = document.getElementById('total_person');
        div_total_per_person.innerHTML = total_per_person;
    };
    


    function myRound(num, dec) {
      let exp = Math.pow(10, dec || 2); // 2 decimales por defecto
      return parseInt(num * exp, 10) / exp;
    }
    </script>
  Bill

  Select Tip %
  5%
  10%
  15%
  25%
  50%
  Custom

  Number of People

  Tip Amount
  / person

  Total
  / person

  Reset
  
  <div class="attribution">
    Challenge by <a href="https://www.frontendmentor.io?ref=challenge" target="_blank">Frontend Mentor</a>. 
    Coded by <a href="#">Your Name Here</a>.
  </div>
</body>
</html>